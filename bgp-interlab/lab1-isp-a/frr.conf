frr version 8.5
frr defaults traditional
hostname lab1-isp-a
log syslog informational
no ipv6 forwarding
service integrated-vtysh-config
!
! ============================================================
!  Prefix list: permit ONLY RFC1918, deny everything else
!  This explicitly blocks 0.0.0.0/0 and any public prefixes
! ============================================================
ip prefix-list RFC1918 seq 10 permit 10.0.0.0/8 le 32
ip prefix-list RFC1918 seq 20 permit 172.16.0.0/12 le 32
ip prefix-list RFC1918 seq 30 permit 192.168.0.0/16 le 32
ip prefix-list RFC1918 seq 999 deny any
!
! Route-maps reference the prefix-list for both directions
route-map RFC1918-OUT permit 10
 match ip address prefix-list RFC1918
!
route-map RFC1918-OUT deny 999
!
route-map RFC1918-IN permit 10
 match ip address prefix-list RFC1918
!
route-map RFC1918-IN deny 999
!
router bgp 65010
 bgp router-id 172.30.30.10
 no bgp ebgp-requires-policy
 !
 ! Redistribute connected & static so lab subnets get advertised
 ! The route-map on the neighbor statements will filter what actually goes out
 redistribute connected
 redistribute static
 !
 ! Peer with Lab2 ISP-A host
 neighbor 172.30.30.12 remote-as 65012
 neighbor 172.30.30.12 description lab2-isp-a
 !
 address-family ipv4 unicast
  neighbor 172.30.30.12 route-map RFC1918-IN in
  neighbor 172.30.30.12 route-map RFC1918-OUT out
 exit-address-family
!
line vty
!
