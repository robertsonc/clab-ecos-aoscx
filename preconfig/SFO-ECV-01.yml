# appliance info
applianceInfo:
  softwareVersion:
  hostname: SFO-ECV-01
  group: CLAB
  site: CLAB-SFO
  clusterProfile:
  networkRole: non-hub
  region: ga
  location:
    address: 1 Dr Carlton B Goodlett Pl
    address2:
    city: San Francisco
    state: California
    zipCode: 94102
    country: US
    latitude:
    longitude:
  contact:
    name: ContainerLab
    email:
    phoneNumber:
# end of appliance info

# template groups
templateGroups:
  groups:
    - Default Template Group
    - VXLAN
# end of template groups

# overlays
businessIntentOverlays:
    overlays:
      - RealTime
      - CriticalApps
      - BulkApps
      - DefaultOverlay
      - CSN_LBO
      - CSN_SSE
# end of overlays

# deployment info
deploymentInfo:
  deploymentMode: inline-router
  totalOutboundBandwidth: 600000
  totalInboundBandwidth: 600000
  passThroughShapedTraffic:
    outboundMaxBandwidth: 10000000

  deploymentInterfaces:
    - interfaceName: lan0
      interfaceType: lan
      interfaceComment: "to SFO-vCX-01 1/1/1"
      ipAddressMask: 10.5.0.0/31
      nextHop:
      segment: Default
      zone: Default
      role: default
    - interfaceName: wan0
      interfaceLabel: CL_INET
      interfaceType: wan
      interfaceComment: internet
      ipAddressMask:
      nextHop:
      inboundMaxBandwidth: 200000
      outboundMaxBandwidth: 200000
      firewallMode: statefulSNAT
      behindNat: none
      segment: Default
      zone: Default
      role: default
    - interfaceName: wan1
      interfaceLabel: CL_MPLS
      interfaceType: wan
      interfaceComment: mpls
      ipAddressMask:
      nextHop:
      inboundMaxBandwidth: 200000
      outboundMaxBandwidth: 200000
      firewallMode: All
      behindNat: none
      segment: Default
      zone: Default
      role: default

  dhcpInfo:
    - dhcpInterfaceName: lan0
      dhcpType: server
      dhcpAddressMask: 10.5.0.0/31
      gatewayIpAddress: 10.5.0.0
      startIpAddress: 10.5.0.0
      endIpAddress: 10.5.0.1
# end of deployment info

# loopback configuration
loopbackInterface:
  loopbacks:
    - interfaceId: lo0
      adminStatus: Up
      ipAddressMask: 198.19.0.5/32
      interfaceLabel:
      zone: Default
      role: default
      segment: Default
# end of loopback configuration

# ospf configuration
segmentOspfConfig:
  - segment: Default
    enable: true
    routerId: 172.30.30.25
    redistMapToOspf: loopback_to_ospf
    opaqueEnable: true
    areas:
      - areaId: 0.0.0.0
        areaType: 0

    interfaces:
      - interfaceName: lan0
        areaId: 0.0.0.0
        cost: 1
        priority: 1
        adminStatus: Up
        helloInterval: 10
        deadInterval: 40
        transmitDelay: 1
        retransmitInterval: 4
        authentication: None
        authenticationKey:
        md5Key: 0
        md5Password:
        comment:
# end of ospf configuration

# bgp configuration
segmentBgpSystems:
  - segment: Default
    enable: true
    asn: 64005
    routerId: 172.30.30.25
    enableGracefulRestart: true
    maxRestartTime: 120
    maxStalePathTime: 150
    redistToSilverPeak: true
    propagateAsPath: true
    redistOspfToBgp: true
    filterTag: 0
    importRouteTarget:
    exportRouteTarget:

    neighbors:
      # IPV6 BGP peers are only supported from ECOS 9.3.0 and above
      - peerIpAddress: 198.18.5.1
        sourceIpInterface: lo0
        peerAsn: 65005
        peerType: Branch
        enableNeighbor: true
        softReconfiguration: false
        nextHopSelf: true
        inboundRouteMap : evpn_in
        outboundRouteMap : evpn_out
        keepAlive: 30
        holdTime: 90
        password:
        enableEVPN: true

  - segment: CSN_Managed
    enable: true
    asn: 64005
    routerId: 172.30.30.25
    enableGracefulRestart: true
    maxRestartTime: 120
    maxStalePathTime: 150
    redistToSilverPeak: true
    propagateAsPath: true
    redistOspfToBgp: true
    filterTag: 0
    importRouteTarget: 65005:10010
    exportRouteTarget: 65005:10010

  - segment: CSN_Unmanaged
    enable: true
    asn: 64005
    routerId: 172.30.30.25
    enableGracefulRestart: true
    maxRestartTime: 120
    maxStalePathTime: 150
    redistToSilverPeak: true
    propagateAsPath: true
    redistOspfToBgp: true
    filterTag: 0
    importRouteTarget: 65005:10011
    exportRouteTarget: 65005:10011

  - segment: CSN_Guest
    enable: true
    asn: 64005
    routerId: 172.30.30.25
    enableGracefulRestart: true
    maxRestartTime: 120
    maxStalePathTime: 150
    redistToSilverPeak: true
    propagateAsPath: true
    redistOspfToBgp: true
    filterTag: 0
    importRouteTarget: 65005:10012
    exportRouteTarget: 65005:10012
# end of bgp configuration

# segment local routes
segmentLocalRoutes:
  - segment: CSN_Managed
    routes:
      - routeIpSubnet: 0.0.0.0/0
        nextHop:
        interfaceName:
        metric: 50
        advertise: true
        advertiseToBgp: false
        advertiseToOspf: false
        tag: ANY
        zone:
        comment: Default for CSN_Managed
        routeLabel: Internet
  - segment: CSN_Unmanaged
    routes:
      - routeIpSubnet: 0.0.0.0/0
        nextHop:
        interfaceName:
        metric: 50
        advertise: true
        advertiseToBgp: false
        advertiseToOspf: false
        tag: ANY
        zone:
        comment: Default for CSN_Unmanaged
        routeLabel: Internet
  - segment: CSN_Guest
    routes:
      - routeIpSubnet: 0.0.0.0/0
        nextHop:
        interfaceName:
        metric: 50
        advertise: true
        advertiseToBgp: false
        advertiseToOspf: false
        tag: ANY
        zone:
        comment: Default for CSN_Guest
        routeLabel: Internet
# end of segment local routes

# vxlan configuration
vxlan:
  destinationUdpPort: 4789
  vtepSrcInterface: lo0
# end of vxlan configuration

# DHCP address pool configuration
dhcpRemoteAddressPoolConfig:
  dhcpAddressMask: 192.168.50.0/24
  scopeName: CSN_Managed
  ipRange:
    - ipStart: 192.168.50.11
      ipEnd: 192.168.50.25
  gatewayIp: 192.168.50.1
  dnsServers:
    - 8.8.8.8
    - 8.8.4.4
  maxLeaseTime: 43200
  defaultLeaseTime: 43200
  options:
    - option: 1
      value: 255.255.255.0

dhcpRemoteAddressPoolConfig:
  dhcpAddressMask: 192.168.51.0/24
  scopeName: CSN_Unmanaged
  ipRange:
    - ipStart: 192.168.51.11
      ipEnd: 192.168.51.25
  gatewayIp: 192.168.51.1
  dnsServers:
    - 8.8.8.8
    - 8.8.4.4
  maxLeaseTime: 43200
  defaultLeaseTime: 43200
  options:
    - option: 1
      value: 255.255.255.0

dhcpRemoteAddressPoolConfig:
  dhcpAddressMask: 192.168.52.0/24
  scopeName: CSN_Guest
  ipRange:
    - ipStart: 192.168.52.11
      ipEnd: 192.168.52.25
  gatewayIp: 192.168.52.1
  dnsServers:
    - 8.8.8.8
    - 8.8.4.4
  maxLeaseTime: 43200
  defaultLeaseTime: 43200
  options:
    - option: 1
      value: 255.255.255.0
# end of DHCP address pool configuration
